<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Beyond Heatmaps: Mapping Two Variables with Plotly in Public Health | Xin (David) Zhao </title> <meta name="author" content="Xin (David) Zhao"> <meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://davidzhao1015.github.io/blog/2025/plotly-maps-public-health/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Xin</span> (David) Zhao </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/publications/">publications</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/projects/">projects</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/blog/">blog</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Beyond Heatmaps: Mapping Two Variables with Plotly in Public Health</h1> <p class="post-meta"> Created in January 27, 2025 </p> <p class="post-tags"> <a href="/blog/2025"> <i class="fa-solid fa-calendar fa-sm"></i> 2025 </a>   ·   <a href="/blog/tag/data-visualization"> <i class="fa-solid fa-hashtag fa-sm"></i> data-visualization;</a>   <a href="/blog/tag/epidemiology"> <i class="fa-solid fa-hashtag fa-sm"></i> epidemiology;</a>   <a href="/blog/tag/plolty"> <i class="fa-solid fa-hashtag fa-sm"></i> plolty;</a>   <a href="/blog/tag/choropleth-map"> <i class="fa-solid fa-hashtag fa-sm"></i> choropleth-map;</a>   <a href="/blog/tag/fermented-food"> <i class="fa-solid fa-hashtag fa-sm"></i> fermented-food;</a>   <a href="/blog/tag/covid-19"> <i class="fa-solid fa-hashtag fa-sm"></i> COVID-19</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <h2 id="background">Background</h2> <p>In public health and epidemiology, data visualization isn’t just about aesthetics—it’s about clarity, impact, and storytelling. Choropleth maps, which color-code geographic areas based on variable intensity, are a go-to tool for illustrating spatial trends in disease burden, health behaviors, or population risk factors.</p> <p>But what if you want to compare <strong>two variables simultaneously</strong> on the same geographic map?</p> <p>This is a common challenge in health data storytelling. For instance, imagine you’re studying the <strong>distribution of a dietary habit</strong> and the <strong>associated disease outcomes</strong>—how do you present this relationship clearly and intuitively?</p> <p><strong>💡 Innovation Highlight</strong> Overlay a <strong>bubble map</strong> on top of a choropleth map. The base layer (choropleth) provides a regional context for one variable, while the overlaid bubbles show the intensity of another, allowing for quick visual comparisons.</p> <p>This post shows how to combine two variables on a single map using a dual-layer approach — choropleth for spatial intensity + bubble size for a second variable. It’s a simple but powerful storytelling technique.</p> <h3 id="-real-world-example">📌 Real-World Example</h3> <p>In 2020, a <a href="https://www.medrxiv.org/content/10.1101/2020.07.06.20147025v1" rel="external nofollow noopener" target="_blank">preprint</a> suggested that <strong>fermented vegetable consumption</strong> might be inversely associated with <strong>COVID-19 mortality</strong> in Europe—even after adjusting for confounding factors. I wanted to explore that hypothesis using public data and an interactive map.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/snapshort_final_map.png" sizes="95vw"></source> <img src="/assets/img/snapshort_final_map.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <p>This interactive map overlays fermented food intake (bubbles) on COVID-19 death rates (color). Scroll down to learn how it’s built.</p> <hr> <h2 id="-quick-start">📦 <strong>Quick Start</strong> </h2> <ol> <li>Install dependencies</li> <li>Download the dataset (<a href="https://github.com/davidzhao1015/plotly-bubble-choropleth/tree/main/input_csv" rel="external nofollow noopener" target="_blank">link</a>)</li> <li>Run the notebook <a href="https://mybinder.org/v2/gh/davidzhao1015/plotly-bubble-choropleth/main?urlpath=%2Fdoc%2Ftree%2Finteractive-map-covid-fermented-food_v3.ipynb" rel="external nofollow noopener" target="_blank"><img src="https://mybinder.org/badge_logo.svg" alt="Binder"></a> </li> <li>Explore the interactive map</li> </ol> <hr> <h2 id="what-youll-need-to-recreate-this-map"><strong>What You’ll Need to Recreate This Map</strong></h2> <p>To recreate the interactive map and plots in this post, you’ll need a few Python packages commonly used in data science:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Core data handling
</span><span class="kn">import</span> <span class="n">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="n">seaborn</span> <span class="k">as</span> <span class="n">sns</span>

<span class="c1"># Interactive map visualization
</span><span class="kn">import</span> <span class="n">plotly.express</span> <span class="k">as</span> <span class="n">px</span> <span class="c1"># Creating choropleth and scatter_geo maps
</span><span class="kn">import</span> <span class="n">plotly.graph_objects</span> <span class="k">as</span> <span class="n">go</span> <span class="c1"># Overlaying plot layers and annotation
</span>
<span class="c1"># For geospatial data 
</span><span class="kn">import</span> <span class="n">requests</span> <span class="c1"># Fetching GeoJSON data from remote URL 
</span><span class="kn">import</span> <span class="n">json</span> <span class="c1"># Parsing JSON data
</span><span class="kn">import</span> <span class="n">pycountry</span> <span class="c1"># Mapping country names to ISO alpha-3 codes
</span>
<span class="c1"># For exporting maps
</span><span class="kn">import</span> <span class="n">plotly.io</span> <span class="k">as</span> <span class="n">pio</span> <span class="c1"># Exporting Plotly figures as HTML
</span><span class="kn">import</span> <span class="n">kaleido</span>  <span class="c1"># Saving Plotly maps as static images (optional)
</span></code></pre></div></div> <p>💡 <strong>Tip:</strong> This tutorial uses Python packages like pandas, plotly, and pycountry. You can install all dependencies by running:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install</span> <span class="nt">-r</span> requirements.txt
</code></pre></div></div> <p>Or check out the full notebook on <a href="https://github.com/yourusername/repo-name" rel="external nofollow noopener" target="_blank">GitHub</a> to explore the code and interactive map.</p> <h3 id="why-plotlyexpress"><strong>Why plotly.express?</strong></h3> <p>For this project, I used plotly.express to create <strong>interactive choropleth and bubble maps</strong>. Unlike traditional plotting libraries like matplotlib, plotly.express lets you explore maps by hovering, zooming, and clicking — all right inside your browser or Jupyter Notebook.</p> <p>It’s a powerful yet beginner-friendly way to bring geographic data to life.</p> <p>The official tutorials for choropleth are <a href="https://plotly.com/python/choropleth-maps/" rel="external nofollow noopener" target="_blank">here</a>, and for bubble map is <a href="https://plotly.com/python/bubble-maps/" rel="external nofollow noopener" target="_blank">here</a>.</p> <hr> <h2 id="preparing-the-epidemiological-data"><strong>Preparing the Epidemiological Data</strong></h2> <p>Before visualizing our map, we first need to get the data into the right shape. In this case, we’re combining datasets on:</p> <ul> <li>COVID-19 mortality rates (per million people)</li> <li>Fermented food consumption (e.g. sauerkraut, pickled vegetables)</li> </ul> <p>Let’s walk through the key steps.</p> <p><strong>📂 1. Load Data from CSV</strong></p> <p>We read the data using pandas — a Python package that makes working with tables easy:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">pandas</span> <span class="k">as</span> <span class="n">pd</span>

<span class="c1"># Load COVID-19 mortality rate dataset
</span><span class="n">COVID_death_pop_df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">read_csv</span><span class="p">(</span><span class="sh">'</span><span class="s">COVID_mortality_rate.csv</span><span class="sh">'</span><span class="p">)</span>

<span class="c1"># Load fermented vegetables dataset
</span><span class="n">avg_consumption_country</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">read_csv</span><span class="p">(</span><span class="sh">'</span><span class="s">fermented_food_consumption.csv</span><span class="sh">'</span><span class="p">)</span>
</code></pre></div></div> <p><strong>🔄 2. Merge Datasets</strong></p> <p>We then renamed some columns for clarity and merged additional information, like ISO codes and population:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Merge fermented vegetable data with COVID-19 mortality rate data
</span><span class="n">eu_avg_consumption_COVID_death_pop_df</span> <span class="o">=</span> <span class="n">eu_avg_consumption_country</span><span class="p">.</span><span class="nf">merge</span><span class="p">(</span><span class="n">COVID_death_pop_df</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="sh">'</span><span class="s">Country</span><span class="sh">'</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="sh">'</span><span class="s">left</span><span class="sh">'</span><span class="p">)</span>

<span class="c1"># Inspect first rows in the merged dataset
</span><span class="n">eu_avg_consumption_COVID_death_pop_df</span><span class="p">.</span><span class="nf">head</span><span class="p">()</span>   
</code></pre></div></div> <p>The frist rows in the merged dataset:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">Country</span>	<span class="n">Average</span> <span class="n">Consumption</span>	<span class="n">Year</span>	<span class="n">Population</span>	<span class="n">Deaths</span>	<span class="n">Death</span> <span class="n">Rate</span>
<span class="mi">0</span>	<span class="n">France</span>	<span class="mf">1.135681</span>	<span class="mi">2020</span>	<span class="mf">67473651.0</span>	<span class="mf">9284524.0</span>	<span class="mf">0.137602</span>
<span class="mi">1</span>	<span class="n">France</span>	<span class="mf">1.135681</span>	<span class="mi">2021</span>	<span class="mf">67728568.0</span>	<span class="mf">38470807.0</span>	<span class="mf">0.568014</span>
<span class="mi">2</span>	<span class="n">France</span>	<span class="mf">1.135681</span>	<span class="mi">2022</span>	<span class="mf">67957053.0</span>	<span class="mf">54424558.0</span>	<span class="mf">0.800867</span>
<span class="mi">3</span>	<span class="n">France</span>	<span class="mf">1.135681</span>	<span class="mi">2023</span>	<span class="mf">68172977.0</span>	<span class="mf">11230468.0</span>	<span class="mf">0.164735</span>
<span class="mi">4</span>	<span class="n">Czechia</span>	<span class="mf">5.578666</span>	<span class="mi">2020</span>	<span class="mf">10693939.0</span>	<span class="mf">600899.0</span>	<span class="mf">0.056191</span>

</code></pre></div></div> <p><strong>🌍 3. Add Country Codes for Mapping</strong></p> <p>Using pycountry, we convert country names to ISO 3-letter codes so they can be matched to the map:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">pycountry</span>

<span class="c1"># List of EU countries
</span><span class="n">eu_countries</span> <span class="o">=</span> <span class="n">eu_avg_consumption_COVID_death_pop_df</span><span class="p">[</span><span class="sh">'</span><span class="s">Country</span><span class="sh">'</span><span class="p">].</span><span class="nf">unique</span><span class="p">().</span><span class="nf">tolist</span><span class="p">()</span>   

<span class="c1"># Dictionary of country names and their corresponding alpha_3 codes
</span><span class="n">country_alpha3</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">country</span> <span class="ow">in</span> <span class="n">eu_countries</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">country_data</span> <span class="o">=</span> <span class="n">pycountry</span><span class="p">.</span><span class="n">countries</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">country</span><span class="p">)</span>
        <span class="c1"># print(country_data.alpha_3)
</span>        <span class="n">country_alpha3</span><span class="p">[</span><span class="n">country</span><span class="p">]</span> <span class="o">=</span> <span class="n">country_data</span><span class="p">.</span><span class="n">alpha_3</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">country</span><span class="si">}</span><span class="s"> not found</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div> <hr> <h2 id="how-do-we-get-map-data-in-python"><strong>How Do We Get Map Data in Python?</strong></h2> <p>To create interactive maps, we need two things:</p> <ol> <li>A base map that knows the shape of each country (like a digital atlas 📐)</li> <li>A way to match our data (e.g. COVID deaths, food consumption) to the correct country</li> </ol> <p>In this project, we used two helpful Python tools to achieve that:</p> <p><strong>🧩 1. requests + json: Loading the World Map</strong></p> <p>We downloaded a GeoJSON file — which is a special file format that stores map shapes — using Python’s requests module:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">requests</span>
<span class="kn">import</span> <span class="n">json</span>

<span class="n">url</span> <span class="o">=</span> <span class="sh">'</span><span class="s">https://raw.githubusercontent.com/johan/world.geo.json/master/countries.geo.json</span><span class="sh">'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">geojson_data</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="nf">json</span><span class="p">()</span>
</code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Filter the geojson for EU 
</span><span class="n">eu_geojson</span> <span class="o">=</span> <span class="p">{</span>
    <span class="sh">"</span><span class="s">type</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">FeatureCollection</span><span class="sh">"</span><span class="p">,</span>
    <span class="sh">"</span><span class="s">features</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span>
        <span class="n">feature</span> <span class="k">for</span> <span class="n">feature</span> <span class="ow">in</span> <span class="n">geojson_data</span><span class="p">[</span><span class="sh">"</span><span class="s">features</span><span class="sh">"</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">feature</span><span class="p">[</span><span class="sh">"</span><span class="s">properties</span><span class="sh">"</span><span class="p">][</span><span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">]</span> <span class="ow">in</span> <span class="n">targeted_countries</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div> <p><strong>🏷️ 2. pycountry: Matching Country Names to ISO Codes</strong></p> <p>Our datasets (like food consumption) use country names such as “Germany” or “Vietnam”. But map files often use short codes like “DEU” or “VNM”.</p> <p>We used the pycountry module to automatically convert country names into standardized ISO codes:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">pycountry</span>

<span class="c1"># List of EU countries
</span><span class="n">eu_countries</span> <span class="o">=</span> <span class="n">eu_avg_consumption_COVID_death_pop_df</span><span class="p">[</span><span class="sh">'</span><span class="s">Country</span><span class="sh">'</span><span class="p">].</span><span class="nf">unique</span><span class="p">().</span><span class="nf">tolist</span><span class="p">()</span>   

<span class="c1"># Dictionary of country names and their corresponding alpha_3 codes
</span><span class="n">country_alpha3</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">country</span> <span class="ow">in</span> <span class="n">eu_countries</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">country_data</span> <span class="o">=</span> <span class="n">pycountry</span><span class="p">.</span><span class="n">countries</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">country</span><span class="p">)</span>
        <span class="c1"># print(country_data.alpha_3)
</span>        <span class="n">country_alpha3</span><span class="p">[</span><span class="n">country</span><span class="p">]</span> <span class="o">=</span> <span class="n">country_data</span><span class="p">.</span><span class="n">alpha_3</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">country</span><span class="si">}</span><span class="s"> not found</span><span class="sh">"</span><span class="p">)</span>
        
 <span class="nf">print</span><span class="p">(</span><span class="n">country_alpha3</span><span class="p">)</span>
</code></pre></div></div> <p>Together, these two steps make it possible to visualize complex health and nutrition data on an interactive world map!</p> <hr> <h2 id="choropleth-map--background-color-by-average-fermented-vegetables-consumption"><strong>Choropleth Map – Background Color by Average Fermented Vegetables Consumption</strong></h2> <p>This map shows average fermented vegetable consumption by country, shaded by intensity:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Create a Choropleth map (for country colors) based on fermented vegetable consumption
</span><span class="n">food_map</span> <span class="o">=</span> <span class="n">px</span><span class="p">.</span><span class="nf">choropleth</span><span class="p">(</span>
    <span class="n">data_map_2020</span><span class="p">,</span>
    <span class="n">locations</span><span class="o">=</span><span class="sh">"</span><span class="s">iso_alpha</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="sh">"</span><span class="s">Average Consumption</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">hover_name</span><span class="o">=</span><span class="sh">"</span><span class="s">Country</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">scope</span><span class="o">=</span><span class="sh">"</span><span class="s">europe</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">projection</span><span class="o">=</span><span class="sh">"</span><span class="s">natural earth</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">color_continuous_scale</span><span class="o">=</span><span class="sh">'</span><span class="s">Plasma</span><span class="sh">'</span>
<span class="p">)</span>
</code></pre></div></div> <p>🖼️ ⬇️ Example Output</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/snapshot_choropleth_map_fermented_food.png" sizes="95vw"></source> <img src="/assets/img/snapshot_choropleth_map_fermented_food.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <h2 id="bubble-overlay--covid-19-mortality-rates"><strong>Bubble Overlay – COVID-19 mortality rates</strong></h2> <p>We then add circle markers to indicate COVID-19 mortality rates per country. Bigger bubbles = more intake.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">plotly.graph_objects</span> <span class="k">as</span> <span class="n">go</span>

<span class="n">bubble_map</span> <span class="o">=</span> <span class="n">px</span><span class="p">.</span><span class="nf">scatter_geo</span><span class="p">(</span><span class="n">data_map_2020</span><span class="p">,</span>
                            <span class="n">locations</span><span class="o">=</span><span class="sh">"</span><span class="s">iso_alpha</span><span class="sh">"</span><span class="p">,</span>
                            <span class="n">hover_name</span><span class="o">=</span><span class="sh">"</span><span class="s">Country</span><span class="sh">"</span><span class="p">,</span>
                            <span class="n">size</span><span class="o">=</span><span class="sh">"</span><span class="s">Death Rate</span><span class="sh">"</span><span class="p">,</span>
                            <span class="n">scope</span><span class="o">=</span><span class="sh">"</span><span class="s">europe</span><span class="sh">"</span><span class="p">,</span>
                            <span class="n">projection</span><span class="o">=</span><span class="sh">"</span><span class="s">natural earth</span><span class="sh">"</span><span class="p">,</span>
                            <span class="n">opacity</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="c1"># Set opacity level for better visibility
</span>                            <span class="n">size_max</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span>
                            <span class="n">color_continuous_scale</span><span class="o">=</span><span class="n">px</span><span class="p">.</span><span class="n">colors</span><span class="p">.</span><span class="n">sequential</span><span class="p">.</span><span class="n">Plasma</span><span class="p">)</span>
</code></pre></div></div> <p>🖼️ ⬇️ Example Output:</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/snapshot_bubble_map_COVID.png" sizes="95vw"></source> <img src="/assets/img/snapshot_bubble_map_COVID.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <h2 id="combine-both-layers"><strong>Combine Both Layers</strong></h2> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Combine both layers
</span><span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="p">.</span><span class="nc">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">food_map</span><span class="p">.</span><span class="n">data</span> <span class="o">+</span> <span class="n">bubble_map</span><span class="p">.</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></div> <p><strong>Why These Steps Matter</strong></p> <p>This combination allows us to visualize two variables on the same map:</p> <ul> <li>Red shading = how much fermented food people eat</li> <li>Bubble size = how bad COVID-19 outcomes were</li> </ul> <p>It opens up exploratory insights like:</p> <blockquote> <p>“Do countries with more fermented vegetable consumption have lower COVID-19 death rates?”</p> </blockquote> <p>This dual-layer approach makes it intuitive to compare variables geographically.</p> <h3 id="fine-tuning-the-map-for-clarity--style"><strong>Fine-Tuning the Map for Clarity &amp; Style</strong></h3> <p>Once we’ve layered the choropleth and bubbles, we fine-tune the map to make it easier to understand and more visually polished.</p> <p>Here are some key adjustments made in the notebook:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Improve layout
</span><span class="n">fig</span><span class="p">.</span><span class="nf">update_geos</span><span class="p">(</span>
    <span class="n">scope</span><span class="o">=</span><span class="sh">"</span><span class="s">europe</span><span class="sh">"</span><span class="p">,</span> <span class="c1"># Only show European countries
</span>    <span class="n">showcoastlines</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> 
    <span class="n">showland</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> 
    <span class="n">landcolor</span><span class="o">=</span><span class="sh">"</span><span class="s">lightgray</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">projection_scale</span><span class="o">=</span><span class="mf">1.5</span><span class="p">)</span>

<span class="n">fig</span><span class="p">.</span><span class="nf">update_layout</span><span class="p">(</span>
    <span class="n">coloraxis_colorbar_title</span><span class="o">=</span><span class="sh">"</span><span class="s">Fermented Vegetable Consumption</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">coloraxis_colorscale</span><span class="o">=</span><span class="sh">"</span><span class="s">RdYlBu</span><span class="sh">"</span> <span class="p">,</span> <span class="c1"># Change color scale
</span>    <span class="n">width</span><span class="o">=</span><span class="mi">1200</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span>
    <span class="n">coloraxis_colorbar</span><span class="o">=</span><span class="nf">dict</span><span class="p">(</span>
        <span class="n">orientation</span><span class="o">=</span><span class="sh">"</span><span class="s">h</span><span class="sh">"</span><span class="p">,</span>  <span class="c1"># Set colorbar horizontal
</span>        <span class="n">title</span><span class="o">=</span><span class="sh">"</span><span class="s">Fermented Vegetable Consumption</span><span class="sh">"</span><span class="p">,</span>
        <span class="n">title_side</span><span class="o">=</span><span class="sh">"</span><span class="s">top</span><span class="sh">"</span><span class="p">,</span>
        <span class="n">title_font_size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span>
        <span class="n">thickness</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>  <span class="c1"># Adjust colorbar width
</span>        <span class="nb">len</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>  <span class="c1"># Adjust colorbar height (relative size)
</span>        <span class="n">x</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span>  <span class="c1"># Move colorbar horizontally
</span>        <span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span>  <span class="c1"># Move colorbar vertically
</span>    <span class="p">)</span>
<span class="p">)</span>

<span class="n">fig</span><span class="p">.</span><span class="nf">update_layout</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="nf">dict</span><span class="p">(</span>
        <span class="n">text</span><span class="o">=</span><span class="sh">"</span><span class="s">Fermented Vegetable Consumption and COVID-19 Death Rate in Europe (2020)</span><span class="sh">"</span><span class="p">,</span>
        <span class="n">x</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>  <span class="c1"># Center the title
</span>        <span class="n">y</span><span class="o">=</span><span class="mf">0.98</span><span class="p">,</span>  <span class="c1"># Position it above the colorbar
</span>        <span class="n">xanchor</span><span class="o">=</span><span class="sh">"</span><span class="s">center</span><span class="sh">"</span><span class="p">,</span>  <span class="c1"># Ensure proper centering
</span>        <span class="n">yanchor</span><span class="o">=</span><span class="sh">"</span><span class="s">top</span><span class="sh">"</span><span class="p">,</span>  <span class="c1"># Anchor at the top
</span>        <span class="n">font</span><span class="o">=</span><span class="nf">dict</span><span class="p">(</span>
            <span class="n">size</span><span class="o">=</span><span class="mi">18</span><span class="p">,</span>  <span class="c1"># Increase font size for better readability
</span>            <span class="n">family</span><span class="o">=</span><span class="sh">"</span><span class="s">Arial, sans-serif</span><span class="sh">"</span><span class="p">,</span>  <span class="c1"># Use a professional font
</span>            <span class="n">color</span><span class="o">=</span><span class="sh">"</span><span class="s">black</span><span class="sh">"</span><span class="p">,</span>  <span class="c1"># Set color (adjust if needed)
</span>            <span class="n">weight</span><span class="o">=</span><span class="sh">"</span><span class="s">bold</span><span class="sh">"</span>  <span class="c1"># Bolden the title (alternative: use "&lt;b&gt;Title&lt;/b&gt;" in text)
</span>        <span class="p">)</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="n">fig</span><span class="p">.</span><span class="nf">update_layout</span><span class="p">(</span>
    <span class="n">coloraxis_colorbar</span><span class="o">=</span><span class="nf">dict</span><span class="p">(</span>
        <span class="n">orientation</span><span class="o">=</span><span class="sh">"</span><span class="s">h</span><span class="sh">"</span><span class="p">,</span>  <span class="c1"># Horizontal colorbar
</span>        <span class="n">x</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">y</span><span class="o">=-</span><span class="mf">0.15</span><span class="p">,</span>  <span class="c1"># Move below the map
</span>        <span class="nb">len</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">thickness</span><span class="o">=</span><span class="mi">10</span>
    <span class="p">)</span>
<span class="p">)</span>
</code></pre></div></div> <p><strong>These tweaks:</strong></p> <ul> <li>Geographic layout</li> <li>Colorbar customization</li> <li>Title configuration</li> <li>Additional colorbar adjustment</li> </ul> <h2 id="annotate-country-names-to-the-map"><strong>Annotate country names to the map</strong></h2> <p>To make the map more professional-looking and easier to interpret, we apply layout settings:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">pandas</span> <span class="k">as</span> <span class="n">pd</span>

<span class="c1"># Create the DataFrame
</span><span class="n">country_data</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nc">DataFrame</span><span class="p">({</span>
    <span class="sh">"</span><span class="s">Country</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span><span class="sh">"</span><span class="s">Austria</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Belgium</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Bulgaria</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Bosnia and Herzegovina</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Germany</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Estonia</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Finland</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">France</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">United Kingdom</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Greece</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Croatia</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Hungary</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Latvia</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Montenegro</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Netherlands</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Poland</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Portugal</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Romania</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Slovenia</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Sweden</span><span class="sh">"</span><span class="p">],</span>
    <span class="sh">"</span><span class="s">ISO3</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span><span class="sh">"</span><span class="s">AUT</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">BEL</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">BGR</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">BIH</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">DEU</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">EST</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">FIN</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">FRA</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">GBR</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">GRC</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">HRV</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">HUN</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">LVA</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">MNE</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">NLD</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">POL</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">PRT</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">ROU</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">SVN</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">SWE</span><span class="sh">"</span><span class="p">],</span>
    <span class="sh">"</span><span class="s">Lat</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span><span class="mf">47.5162</span><span class="p">,</span> <span class="mf">50.5039</span><span class="p">,</span> <span class="mf">42.7339</span><span class="p">,</span> <span class="mf">43.9159</span><span class="p">,</span> <span class="mf">51.1657</span><span class="p">,</span> <span class="mf">58.5953</span><span class="p">,</span> <span class="mf">61.9241</span><span class="p">,</span> <span class="mf">46.6034</span><span class="p">,</span> <span class="mf">55.3781</span><span class="p">,</span> <span class="mf">39.0742</span><span class="p">,</span> <span class="mf">45.1</span><span class="p">,</span> <span class="mf">47.1625</span><span class="p">,</span> <span class="mf">56.8796</span><span class="p">,</span> <span class="mf">42.7087</span><span class="p">,</span> <span class="mf">52.1326</span><span class="p">,</span> <span class="mf">51.9194</span><span class="p">,</span> <span class="mf">39.3999</span><span class="p">,</span> <span class="mf">45.9432</span><span class="p">,</span> <span class="mf">46.1512</span><span class="p">,</span> <span class="mf">60.1282</span><span class="p">],</span>
    <span class="sh">"</span><span class="s">Lon</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span><span class="mf">14.5501</span><span class="p">,</span> <span class="mf">4.4699</span><span class="p">,</span> <span class="mf">25.4858</span><span class="p">,</span> <span class="mf">17.6791</span><span class="p">,</span> <span class="mf">10.4515</span><span class="p">,</span> <span class="mf">25.0136</span><span class="p">,</span> <span class="mf">25.7482</span><span class="p">,</span> <span class="mf">1.8883</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.4360</span><span class="p">,</span> <span class="mf">21.8243</span><span class="p">,</span> <span class="mf">15.2</span><span class="p">,</span> <span class="mf">19.5033</span><span class="p">,</span> <span class="mf">24.6032</span><span class="p">,</span> <span class="mf">19.3744</span><span class="p">,</span> <span class="mf">5.2913</span><span class="p">,</span> <span class="mf">19.1451</span><span class="p">,</span> <span class="o">-</span><span class="mf">8.2245</span><span class="p">,</span> <span class="mf">24.9668</span><span class="p">,</span> <span class="mf">14.9955</span><span class="p">,</span> <span class="mf">18.6435</span><span class="p">]</span>
<span class="p">})</span>

<span class="kn">import</span> <span class="n">plotly.graph_objects</span> <span class="k">as</span> <span class="n">go</span>

<span class="c1"># Create the country label layer (scattergeo)
</span><span class="n">country_labels</span> <span class="o">=</span> <span class="n">go</span><span class="p">.</span><span class="nc">Scattergeo</span><span class="p">(</span>
    <span class="n">locationmode</span><span class="o">=</span><span class="sh">"</span><span class="s">ISO-3</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">lon</span><span class="o">=</span><span class="n">country_data</span><span class="p">[</span><span class="sh">"</span><span class="s">Lon</span><span class="sh">"</span><span class="p">],</span>
    <span class="n">lat</span><span class="o">=</span><span class="n">country_data</span><span class="p">[</span><span class="sh">"</span><span class="s">Lat</span><span class="sh">"</span><span class="p">],</span>
    <span class="n">text</span><span class="o">=</span><span class="n">country_data</span><span class="p">[</span><span class="sh">"</span><span class="s">Country</span><span class="sh">"</span><span class="p">],</span>  <span class="c1"># Display country names
</span>    <span class="n">mode</span><span class="o">=</span><span class="sh">"</span><span class="s">text</span><span class="sh">"</span><span class="p">,</span>  <span class="c1"># Only text (no markers)
</span>    <span class="n">textfont</span><span class="o">=</span><span class="nf">dict</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="sh">"</span><span class="s">black</span><span class="sh">"</span><span class="p">,</span> <span class="n">family</span><span class="o">=</span><span class="sh">"</span><span class="s">Arial</span><span class="sh">"</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="sh">"</span><span class="s">bold</span><span class="sh">"</span><span class="p">),</span>  <span class="c1"># Adjust font
</span>    <span class="n">textposition</span><span class="o">=</span><span class="sh">"</span><span class="s">top center</span><span class="sh">"</span><span class="p">,</span>  
    <span class="n">showlegend</span><span class="o">=</span><span class="bp">False</span>
<span class="p">)</span>

<span class="c1"># Add to your existing Plotly figure
</span><span class="n">fig</span><span class="p">.</span><span class="nf">add_trace</span><span class="p">(</span><span class="n">country_labels</span><span class="p">)</span>
</code></pre></div></div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/snapshot_added_country_names.png" sizes="95vw"></source> <img src="/assets/img/snapshot_added_country_names.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <p>Explore the full interactive version on <a href="https://davidzhao1015.github.io/plotly-bubble-choropleth/">GitHub</a>.</p> <h2 id="exporting-the-map"><strong>Exporting the Map</strong></h2> <p>Want to save your plot as an image or HTML? Use:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pio</span><span class="p">.</span><span class="nf">write_image</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="sh">'</span><span class="s">fermented_vegetable_consumption_COVID_death_rate_europe_2020.png</span><span class="sh">'</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="sh">'</span><span class="s">png</span><span class="sh">'</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1200</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>                  <span class="c1"># Save as PNG
</span>
<span class="n">pio</span><span class="p">.</span><span class="nf">write_html</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="nb">file</span><span class="o">=</span><span class="sh">'</span><span class="s">index.html</span><span class="sh">'</span><span class="p">,</span> <span class="n">auto_open</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>       <span class="c1"># Save as interactive webpage
</span></code></pre></div></div> <p>This step is great for sharing visuals in presentations or embedding interactive plots on your own blog or website.</p> <p>Together, these finishing touches elevate your map from “functional” to “insightful and polished.” They also make the visualization more friendly to readers who are new to data exploration or unfamiliar with the dataset.</p> <hr> <h2 id="what-does-the-map-tell-us"><strong>What Does the Map Tell Us?</strong></h2> <p>As we zoom into this interactive map, a few patterns emerge:</p> <ul> <li>Countries like Hungary and Romania — with relatively high intake of fermented vegetables — show noticeably lower COVID-19 mortality in this 2020 dataset.</li> <li>On the other hand, countries with lower fermented food consumption, such as the UK or Belgium, show higher death rates.</li> <li>While this map doesn’t prove causality, it does support the hypothesis from [the original study] that dietary habits might influence immune resilience — a fascinating intersection of public health and nutrition.</li> </ul> <p>Of course, many other factors (like healthcare infrastructure or testing policies) may also be at play. But that’s the beauty of this kind of map — it opens up questions and encourages deeper exploration.</p> </div> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Xin (David) Zhao. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"about",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-blog",title:"blog",description:"",section:"Navigation",handler:()=>{window.location.href="/blog/"}},{id:"nav-publications",title:"publications",description:"publications by categories in reversed chronological order. generated by jekyll-scholar.",section:"Navigation",handler:()=>{window.location.href="/publications/"}},{id:"nav-projects",title:"projects",description:"A growing collection of cool projects.",section:"Navigation",handler:()=>{window.location.href="/projects/"}},{id:"nav-cv",title:"cv",description:"",section:"Navigation",handler:()=>{window.location.href="/cv/"}},{id:"dropdown-publications",title:"publications",description:"",section:"Dropdown",handler:()=>{window.location.href=""}},{id:"dropdown-projects",title:"projects",description:"",section:"Dropdown",handler:()=>{window.location.href=""}},{id:"dropdown-blog",title:"blog",description:"",section:"Dropdown",handler:()=>{window.location.href="/blog/"}},{id:"post-comparing-methods-for-estimating-95-confidence-intervals-of-proportions-wald-wilson-and-equal-tailed-jeffreys-prior",title:"Comparing Methods for Estimating 95% Confidence Intervals of Proportions: Wald, Wilson, and Equal-Tailed...",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/benchmark-interval-prop/"}},{id:"post-modeling-diagnostic-delays-in-rare-disease-a-survival-analysis-case-study-in-python",title:"Modeling Diagnostic Delays in Rare Disease: A Survival Analysis Case Study in Python...",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/delay-diganosis-survival-analysis/"}},{id:"post-from-microbiology-to-bioinformatics-how-embracing-new-skills-transformed-my-career",title:"From Microbiology to Bioinformatics: How Embracing New Skills Transformed My Career",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/my-career-journey/"}},{id:"post-beyond-heatmaps-mapping-two-variables-with-plotly-in-public-health",title:"Beyond Heatmaps: Mapping Two Variables with Plotly in Public Health",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2025/plotly-maps-public-health/"}},{id:"post-how-to-import-excel-files-in-python",title:"How to Import Excel Files in Python",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/import-spreadsheet-python/"}},{id:"post-top-r-packages-for-go-enrichment-analysis-topgo-vs-globaltest-explained",title:"Top R Packages for GO Enrichment Analysis: topGO vs globaltest Explained",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/go-enrichment/"}},{id:"post-how-to-run-r-code-in-jupyter-notebook-within-vs-code-a-step-by-step-guide",title:"How to Run R Code in Jupyter Notebook within VS Code: A Step-by-Step...",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/R-kernel-jupyter/"}},{id:"post-how-to-perform-power-analysis-for-high-throughput-omics-data-using-sspa-a-guide-to-the-bioconductor-package",title:"How to Perform Power Analysis for High-Throughput Omics Data Using SSPA, A Guide...",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/power-analysis/"}},{id:"post-automating-reporting-with-rmarkdown",title:"Automating Reporting with RMarkdown",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/auto-reporting-rmarkdown/"}},{id:"post-introduction-to-linear-mixed-models-with-the-limma-package",title:"Introduction to Linear Mixed Models with the limma Package",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/linear-mixed-model/"}},{id:"post-choosing-the-right-dimensionality-reduction-in-metabolomics-navigating-common-pitfalls",title:"Choosing the Right Dimensionality Reduction in Metabolomics: Navigating Common Pitfalls",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/choose-dimension-reduction/"}},{id:"news-a-simple-inline-announcement",title:"A simple inline announcement.",description:"",section:"News"},{id:"news-a-long-announcement-with-details",title:"A long announcement with details",description:"",section:"News",handler:()=>{window.location.href="/news/announcement_2/"}},{id:"news-a-simple-inline-announcement-with-markdown-emoji-sparkles-smile",title:'A simple inline announcement with Markdown emoji! <img class="emoji" title=":sparkles:" alt=":sparkles:" src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png" height="20" width="20"> <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20">',description:"",section:"News"},{id:"projects-project-3-with-very-long-name",title:"project 3 with very long name",description:"a project that redirects to another website",section:"Projects",handler:()=>{window.location.href="/projects/3_project/"}},{id:"projects-project-4",title:"project 4",description:"another without an image",section:"Projects",handler:()=>{window.location.href="/projects/4_project/"}},{id:"projects-project-5",title:"project 5",description:"a project with a background image",section:"Projects",handler:()=>{window.location.href="/projects/5_project/"}},{id:"projects-project-6",title:"project 6",description:"a project with no image",section:"Projects",handler:()=>{window.location.href="/projects/6_project/"}},{id:"projects-project-7",title:"project 7",description:"with background image",section:"Projects",handler:()=>{window.location.href="/projects/7_project/"}},{id:"projects-project-8",title:"project 8",description:"an other project with a background image and giscus comments",section:"Projects",handler:()=>{window.location.href="/projects/8_project/"}},{id:"projects-project-9",title:"project 9",description:"another project with an image \ud83c\udf89",section:"Projects",handler:()=>{window.location.href="/projects/9_project/"}},{id:"projects-gc-autofit-web-application-automating-and-accelerating-gc-ms-metabolomics",title:"GC-AutoFit: Web Application Automating and Accelerating GC-MS Metabolomics",description:"",section:"Projects",handler:()=>{window.location.href="/projects/gc-autofit/"}},{id:"projects-exploring-ames-housing-prices-a-data-driven-analysis",title:"Exploring Ames Housing Prices: A Data-Driven Analysis",description:"Exploratory data analysis for house price prediction, a Kaggle competition",section:"Projects",handler:()=>{window.location.href="/projects/house-price-prediction/"}},{id:"projects-impact-of-birth-factors-on-infant-gut-health-insights-from-a-microbiota-study",title:"Impact of Birth Factors on Infant Gut Health, Insights from a Microbiota Study...",description:"",section:"Projects",handler:()=>{window.location.href="/projects/infant_bifido_birth/"}},{id:"projects-predict-childhood-obesity-using-rf-xgboost-and-glmm-in-r",title:"Predict Childhood Obesity Using RF, XGBoost and GLMM in R",description:"",section:"Projects",handler:()=>{window.location.href="/projects/predict_obesity_machine_learning/"}},{id:"projects-vitamin-d-and-infant-gut-health-a-regression-analysis",title:"Vitamin D and Infant Gut Health, A Regression Analysis",description:"",section:"Projects",handler:()=>{window.location.href="/projects/vitD_infant_gut/"}},{id:"projects-wegan-web-application-streamlining-ecology-data-analysis",title:"WEGAN: Web Application Streamlining Ecology Data Analysis",description:"",section:"Projects",handler:()=>{window.location.href="/projects/wegan_web_app/"}},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%64%61%76%69%64%7A%68%61%6F%31%30%31%35@%67%6D%61%69%6C.%63%6F%6D","_blank")}},{id:"socials-google-scholar",title:"Google Scholar",section:"Socials",handler:()=>{window.open("https://scholar.google.com/citations?user=OVK0_oAAAAAJ&hl=en","_blank")}},{id:"socials-researchgate",title:"ResearchGate",section:"Socials",handler:()=>{window.open("https://www.researchgate.net/profile/Xin-Zhao-5/","_blank")}},{id:"socials-github",title:"GitHub",section:"Socials",handler:()=>{window.open("https://github.com/davidzhao1015","_blank")}},{id:"socials-linkedin",title:"LinkedIn",section:"Socials",handler:()=>{window.open("https://www.linkedin.com/in/davidxzhao","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>